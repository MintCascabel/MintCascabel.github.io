(()=>{"use strict";const t="http://www.w3.org/2000/svg";class e extends HTMLElement{constructor(){super()}update(t=!0){let e=super.dataset.file;if(!e)throw"data-file attribute is missing";const s=document.getElementById("svg"+e);if(s instanceof SVGSVGElement)this.updateParameters(e,s);else{if(s)throw`svg${e} is not an SVG element`;if(!t)return;this.loadSVG(e)}}updateParameters(e,s){this.svg&&this.use||(this.svg=document.createElementNS(t,"svg"),this.svg.classList.add("vector-xml"),this.appendChild(this.svg),this.use=document.createElementNS(t,"use"),this.svg.appendChild(this.use));let i=s.getAttribute("viewBox");if(!i)throw"SVG lacks viewBox";this.svg.setAttribute("viewBox",i),this.use.setAttribute("href",`#${e}`)}loadSVG(t){fetch(`vector/${t}.xml`).then((t=>t.text())).then((t=>{document.getElementById("container").innerHTML+=t,this.update()}))}connectedCallback(){this.update()}attributeChangedCallback(){this.update()}}let s;function i(t,e,s){return`hsl(${t}, ${e}%, ${s}%)`}function n(t){let[e,s,n]=t;return i(e,s,n)}class a{constructor(){this.palette=new Map,this.tileH=120,this.backL=12,this.frontL=100,this.frontLM=1,this.green=[153,95,26],this.red=[11,77,42],this.black=[230,55,36],this.yellow=[34,85,44],this.orange=[24,77,33],this.magenta=[324,76,41],this.questionRed=[13,80,50],this.trueBlack=[0,0,0]}generate(){this.palette.set("--z005F00",i(this.tileH,100,this.backL+6)),this.palette.set("--zCDDACD",i(this.tileH,14,this.frontL-18*this.frontLM)),this.palette.set("--zFFFFFF",i(this.tileH,14,this.frontL)),this.palette.set("--z053D05",i(this.tileH,84,this.backL)),this.palette.set("--z024C02",i(this.tileH,94,this.backL+3)),this.palette.set("--z038249",n(this.green)),this.palette.set("--zBF3718",n(this.red)),this.palette.set("--z2A3B92",n(this.black)),this.palette.set("--zD37F11",n(this.yellow)),this.palette.set("--z994913",n(this.orange)),this.palette.set("--zBC1974",n(this.magenta)),this.palette.set("--zE6491C",n(this.questionRed)),this.palette.set("--z000000",n(this.trueBlack))}colorize(){if(this.generate(),s||(s=function(){var t;for(const e of document.styleSheets)if(null===(t=e.href)||void 0===t?void 0:t.endsWith("vector/color.css"))for(const t of e.cssRules)if(t instanceof CSSStyleRule&&":root"===t.selectorText)return t}()),!s)throw"Failed to get color root";for(const t of this.palette.keys())s.style.setProperty(t,this.palette.get(t))}}window.customElements.define("vector-xml",e),document.getElementById("palette").addEventListener("change",(function(){switch(document.getElementById("palette").value){case"light1":(new a).colorize();break;case"light2":(function(){const t=new a;return t.black=t.trueBlack,t.red=[10,80,50],t.green=[150,100,30],t})().colorize();break;case"dark1":(function(){const t=new a;return t.tileH=0,t.backL=100,t.frontL=0,t.frontLM=-.35,t.green=[180,95,40],t.red=[340,100,50],t.questionRed=t.red,t.black=[0,0,100],t.yellow=[30,85,50],t.orange=[0,0,100],t.magenta=[320,80,50],t})().colorize();break;case"dark2":(function(){const t=new a;return t.tileH=0,t.backL=100,t.frontL=0,t.frontLM=-.35,t.green=[180,70,30],t.red=[50,70,40],t.questionRed=t.red,t.black=[0,0,100],t.yellow=[30,85,50],t.orange=[0,0,100],t.magenta=[320,80,20],t})().colorize()}}))})();